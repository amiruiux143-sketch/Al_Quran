<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Al-Qur'an Mobile</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #ffffff; --header: #fbfbfb; --gold: #b2904f; --line: #f0f0f0; --text: #000; --fz-ar: 32px; }
        body.dark-mode { --bg: #121212; --header: #1e1e1e; --line: #333; --text: #eee; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); font-family: 'Montserrat', sans-serif; margin: 0; padding-bottom: 80px; color: var(--text); transition: 0.3s; }

        /* Splash Screen */
        #splash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #121212; z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s; color: white; }
        .bism-text { font-family: 'Amiri', serif; font-size: 36px; color: var(--gold); margin-bottom: 10px; }

        .main-header { position: sticky; top: 0; z-index: 1000; background: var(--header); padding: 12px 15px; border-bottom: 1px solid var(--line); }
        .main-header h1 { font-size: 22px; margin: 0; font-weight: 700; color: var(--gold); }
        #surahSearch { width: 100%; padding: 12px 15px; border-radius: 12px; border: none; background: #f0f0f0; outline: none; margin-top: 10px; font-size: 14px; color: #000; }

        .page-sec { display: none; padding: 10px; }
        .page-sec.active { display: block; }

        /* List Items */
        .item { display: flex; align-items: center; padding: 18px 10px; border-bottom: 1px solid var(--line); cursor: pointer; }
        .num { color: var(--gold); font-size: 14px; width: 40px; font-weight: bold; }
        .info { flex-grow: 1; }
        .ar-name { font-size: 24px; color: var(--gold); font-family: 'Amiri', serif; }

        /* Prayer Card */
        .prayer-card { background: var(--header); border-radius: 20px; padding: 25px; border: 1px solid var(--line); text-align: center; }
        .gps-btn { width: 100%; padding: 16px; border-radius: 15px; border: none; background: var(--gold); color: white; font-weight: bold; cursor: pointer; margin-bottom: 15px; font-size: 14px; }
        .prayer-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--line); font-weight: 600; }

        /* Surah Content Window */
        .window { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); z-index: 2000; overflow-y: auto; }
        .window-header { position: sticky; top: 0; background: var(--header); height: 60px; display: flex; align-items: center; padding: 0 15px; border-bottom: 1px solid var(--line); }
        .close-btn { font-size: 30px; color: var(--gold); border: none; background: none; cursor: pointer; }

        .ayah-box { padding: 20px; border-bottom: 1px solid var(--line); }
        .ar-text { direction: rtl; font-family: 'Amiri', serif; font-size: var(--fz-ar); line-height: 2; text-align: right; margin-bottom: 15px; }
        .ru-text { font-size: 16px; opacity: 0.8; line-height: 1.6; }
        .audio-btn { margin-top: 15px; background: rgba(178, 144, 79, 0.1); border: 1px solid var(--gold); color: var(--gold); padding: 8px 18px; border-radius: 20px; font-weight: bold; cursor: pointer; }

        /* Nav Bar */
        .nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: var(--header); display: flex; border-top: 1px solid var(--line); z-index: 1500; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 11px; color: #888; cursor: pointer; }
        .nav-item.active { color: var(--gold); font-weight: bold; }
    </style>
</head>
<body class="dark-mode">

<div id="splash">
    <div class="bism-text">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸëŸéŸáŸê ÿßŸÑÿ±ŸëŸéÿ≠ŸíŸÖŸéŸÜŸê ÿßŸÑÿ±ŸëŸéÿ≠ŸêŸäŸÖŸê</div>
    <div style="font-size: 12px; opacity: 0.6; letter-spacing: 2px;">AL-QUR'AN</div>
</div>

<header class="main-header" id="mainHeader">
    <div style="display:flex; justify-content: space-between; align-items: center;">
        <h1 id="pageTitle">–ö–æ—Ä–∞–Ω</h1>
        <span style="font-weight: bold; color: var(--gold);">RU</span>
    </div>
    <input type="text" id="surahSearch" placeholder="–ù–∞–π—Ç–∏ —Å—É—Ä—É..." onkeyup="filterSurahs()">
</header>

<div id="quranSec" class="page-sec active"><div id="surahList"></div></div>
<div id="namesSec" class="page-sec"><div id="namesList"></div></div>
<div id="prayerSec" class="page-sec">
    <div class="prayer-card">
        <button class="gps-btn" onclick="getGPS()">üìç –û–ü–†–ï–î–ï–õ–ò–¢–¨ –í–†–ï–ú–Ø –ù–ê–ú–ê–ó–ê</button>
        <div id="cityName" style="font-size: 12px; opacity: 0.6; margin-bottom: 10px;">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–¥–∞–Ω–æ</div>
        <div id="hijriDate" style="color: var(--gold); font-weight: bold; margin-bottom: 20px;"></div>
        <div id="prayerContent"></div>
    </div>
</div>
<div id="settingsSec" class="page-sec">
    <div style="padding: 10px;">
        <div style="background:var(--header); padding: 20px; border-radius: 15px; border:1px solid var(--line);">
            <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <span>–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                <input type="checkbox" checked onchange="document.body.classList.toggle('dark-mode')">
            </div>
            <span>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞:</span>
            <input type="range" min="20" max="50" value="32" style="width:100%; margin-top:10px; accent-color: var(--gold);" oninput="document.documentElement.style.setProperty('--fz-ar', this.value + 'px')">
        </div>
    </div>
</div>

<div id="surahWin" class="window">
    <div class="window-header">
        <button class="close-btn" onclick="closeSurah()">‚úï</button>
        <h2 id="winTitle" style="flex:1; text-align:center; font-size:18px;"></h2>
    </div>
    <div id="winContent"></div>
</div>

<nav class="nav">
    <div class="nav-item active" onclick="showPage('quran', this, '–ö–æ—Ä–∞–Ω')"><span>üìñ</span>–ö–æ—Ä–∞–Ω</div>
    <div class="nav-item" onclick="showPage('names', this, '99 –ò–º–µ–Ω')"><span>‚ú®</span>–ò–º–µ–Ω–∞</div>
    <div class="nav-item" onclick="showPage('prayer', this, '–ù–∞–º–∞–∑')"><span>üïå</span>–ù–∞–º–∞–∑</div>
    <div class="nav-item" onclick="showPage('settings', this, '–û–ø—Ü–∏–∏')"><span>‚öôÔ∏è</span>–û–ø—Ü–∏–∏</div>
</nav>

<script>
let allSurahs = [];
const audio = new Audio();

const namesList = [
    {ar:"ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸÜŸè", tr:"Ar-Rahman", ru:"–ú–∏–ª–æ—Å—Ç–∏–≤—ã–π"}, {ar:"ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸè", tr:"Ar-Rahim", ru:"–ú–∏–ª–æ—Å–µ—Ä–¥–Ω—ã–π"}, {ar:"ÿßŸÑŸíŸÖŸéŸÑŸêŸÉŸè", tr:"Al-Malik", ru:"–¶–∞—Ä—å"}, {ar:"ÿßŸÑŸíŸÇŸèÿØŸèŸëŸàÿ≥Ÿè", tr:"Al-Quddus", ru:"–°–≤—è—Ç–æ–π"}, {ar:"ÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè", tr:"As-Salam", ru:"–ü—Ä–µ—á–∏—Å—Ç—ã–π"}, {ar:"ÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸè", tr:"Al-Mu'min", ru:"–û–±–µ—Ä–µ–≥–∞—é—â–∏–π"}, {ar:"ÿßŸÑŸíŸÖŸèŸáŸéŸäŸíŸÖŸêŸÜŸè", tr:"Al-Muhaymin", ru:"–•—Ä–∞–Ω–∏—Ç–µ–ª—å"}, {ar:"ÿßŸÑŸíÿπŸéÿ≤ŸêŸäÿ≤Ÿè", tr:"Al-Aziz", ru:"–ú–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π"}
];

function showPage(p, el, title) {
    document.querySelectorAll('.page-sec, .nav-item').forEach(x => x.classList.remove('active'));
    document.getElementById(p + 'Sec').classList.add('active');
    el.classList.add('active');
    document.getElementById('pageTitle').innerText = title;
    document.getElementById('surahSearch').style.display = (p === 'quran') ? 'block' : 'none';
}

async function init() {
    setTimeout(() => { document.getElementById('splash').style.opacity = '0'; setTimeout(()=>document.getElementById('splash').remove(), 800); }, 2000);
    const res = await fetch("https://api.alquran.cloud/v1/surah");
    const data = await res.json();
    allSurahs = data.data;
    renderSurahs(allSurahs);
    renderNames();
}

function renderSurahs(list) {
    document.getElementById('surahList').innerHTML = list.map(s => `
        <div class="item" onclick="openSurah(${s.number}, '${s.englishName}')">
            <div class="num">${s.number}</div>
            <div class="info"><b>${s.englishName}</b></div>
            <div class="ar-name">${s.name}</div>
        </div>`).join('');
}

function renderNames() {
    document.getElementById('namesList').innerHTML = namesList.map((n, i) => `
        <div class="item"><div class="num">${i+1}</div><div class="info"><b>${n.tr}</b><br><small>${n.ru}</small></div><div class="ar-name">${n.ar}</div></div>`).join('');
}

async function openSurah(id, name) {
    document.getElementById('surahWin').style.display = 'block';
    document.getElementById('winTitle').innerText = name;
    const res = await fetch(`https://api.alquran.cloud/v1/surah/${id}/editions/quran-uthmani,ru.kuliev`);
    const d = await res.json();
    document.getElementById('winContent').innerHTML = d.data[0].ayahs.map((a, i) => `
        <div class="ayah-box">
            <div class="ar-text">${a.text}</div>
            <div class="ru-text"><b>${i+1}.</b> ${d.data[1].ayahs[i].text}</div>
            <button class="audio-btn" onclick="playAudio(${a.number})">‚ñ∂ –°–ª—É—à–∞—Ç—å</button>
        </div>`).join('');
}

function playAudio(num) { audio.src = `https://cdn.islamic.network/quran/audio/128/ar.alafasy/${num}.mp3`; audio.play(); }
function closeSurah() { document.getElementById('surahWin').style.display = 'none'; audio.pause(); }

function filterSurahs() {
    const q = document.getElementById('surahSearch').value.toLowerCase();
    renderSurahs(allSurahs.filter(s => s.englishName.toLowerCase().includes(q) || s.number == q));
}

function getGPS() {
    const cityText = document.getElementById('cityName');
    cityText.innerText = "–ó–∞–ø—Ä–æ—Å –¥–æ—Å—Ç—É–ø–∞ –∫ GPS...";
    
    navigator.geolocation.getCurrentPosition(async (pos) => {
        cityText.innerText = "üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ";
        const res = await fetch(`https://api.aladhan.com/v1/timings?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&method=3`);
        const d = await res.json();
        const t = d.data.timings;
        const n = { Fajr: "–§–∞–¥–∂—Ä", Sunrise: "–í–æ—Å—Ö–æ–¥", Dhuhr: "–ó—É—Ö—Ä", Asr: "–ê—Å—Ä", Maghrib: "–ú–∞–≥—Ä–∏–±", Isha: "–ò—à–∞" };
        
        document.getElementById('hijriDate').innerText = `${d.data.date.hijri.day} ${d.data.date.hijri.month.en} ${d.data.date.hijri.year} AH`;
        document.getElementById('prayerContent').innerHTML = Object.keys(n).map(k => `
            <div class="prayer-row"><span>${n[k]}</span><span style="color:var(--gold)">${t[k]}</span></div>
        `).join('');
    }, (err) => {
        cityText.innerText = "–û—à–∏–±–∫–∞: –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ GPS –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.";
    });
}

init();
</script>
</body>
</html>



